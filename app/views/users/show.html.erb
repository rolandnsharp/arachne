<!-- get embedded hash array -->
<% thought_array=[] %>
<% @thoughts.each do |thought| %>
 <% thought.content.to_s   %>
 <% str=  thought.content.to_s   %>
 <% tags = str.scan(/#\w+/).uniq %>
 <%thought_array= thought_array+[tags] %>
<% end %>

<%= javascript_tag do %>
  window.userName = "<%=j @user.username %>";
  window.nodeCount = "<%= @thoughts.size %>";
  window.hashArray = <%=raw thought_array.as_json %>;
<% end %>

<div style="display: none;">
<%= text_field_tag :query, params[:query] %>
</div>


<div class="container-fluid" style=" height:100%;" >
  <div class="row-fluid" style="height:100%;">
  
  <div class=" sigma-parent" id="sigma-example-parent" >
    <div class="sigma-expand" id="sigma-example" ></div>
  </div>




</br>
  
<%= link_to "Edit", edit_user_path(@user), class: "btn btn-primary" %>
<h4>refresh page if graph doesn't load</h4>



   <!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <% @thoughts_search.each do |thought|%>
    <tr>
      <td>
      <% mod = thought.content.scan(/#\w+/) %>
       <% title = mod[0] %>
       
       <%= title %>


       </br>
       <%= link_to thought.content.scan(/#\w+/).uniq, params.merge({:id_edit => thought.id}) %>
      </td>
    </tr>
  <% end %> 
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <!-- <button class="btn btn-primary">Save changes</button> -->
  </div>
</div>
  </div>
</div>



 
